# ATDD Checklist - Epic 5, Story 5.1: Data Population - Elder Powers

**Date:** 2026-01-25
**Author:** Zaès (via Antigravity)
**Primary Test Level:** Unit (Data Logic)

---

## Story Summary

**As a** Developer
**I want** to populate the `disciplines.js` file with power definitions for levels 6 through 10
**So that** the application has the necessary data to display Elder powers to users

---

## Acceptance Criteria

1.  **Given** the existing `disciplines.js` file contains powers only up to level 5
2.  **When** I add the provided data for levels 6-10 for all implemented disciplines
3.  **Then** the `DISCIPLINES` object should contain valid power objects (name, level, cost, description) for levels 6-10
4.  **And** no existing low-level powers should be modified or deleted
5.  **And** the data structure should remain consistent with levels 1-5 (narrative focus)

---

## Failing Tests Created (RED Phase)

> **Note**: This verification was performed retroactively on completed work.

### Unit Tests (Logic)

**File:** `web/src/data/disciplines.test.js`

- ✅ **Test:** `should map BP 6-10 correctly to Levels 6-10`
  - **Status:** GREEN
  - **Verifies:** Data logic mapping for Elder levels.

- ✅ **Test:** `should return clan disciplines with maxLevel cap for BP 10`
  - **Status:** GREEN
  - **Verifies:** Logic correctly exposes higher level powers when BP permits.

### Component Tests (UI)

**File:** `web/src/modules/vampire/components/DisciplinesTab.CaineMode.test.jsx`

- ❌ **Test:** `should allow clicking level 10 powers in Caine Mode`
  - **Status:** RED (Regression/Bug)
  - **Failure:** `TypeError: Cannot read properties of null (reading 'className')`
  - **Note:** While out of strict scope for "Data Population", this indicates the UI isn't fully ready for the data.

---

## Data Factories Created

- **Manual Data Entry:** `web/src/data/disciplines.js` populated directly.

---

## Implementation Checklist

### Data Population
- [x] Analyze research data (`domain-Disciplines-V20-Levels-6-10-research-2026-01-11.md`)
- [x] Update `disciplines.js` with Level 6-10 powers for all 15 disciplines
- [x] Verify data structure integrity (JSON/JS validity)
- [x] Ensure no regression on Levels 1-5

### Verification
- [x] Run Logic Tests (`disciplines.test.js`) -> PASS
- [ ] Fix UI Regression (`DisciplinesTab.CaineMode.test.jsx`) -> FAIL

---

## Running Tests

```bash
# Run disciplines data logic tests
npm test web/src/data/disciplines.test.js

# Run all related tests (including UI)
npm test -- disciplines
```

---

## Red-Green-Refactor Workflow

### RED Phase (Retroactive)
- Tests for logic and data integrity were defined.

### GREEN Phase (Partial) ⚠️
- Data logic tests pass.
- Application loads without crashing.
- **Issue:** UI Component test fails when interacting with Level 10 elements.

***

**Generated by BMad TEA Agent** - 2026-01-25
